class Table{contactId=-1;constructor(contacts,container){this.tableHeaderContext=null,this.tableDataContext=new TableDataRowsContext(-1),this.table=null,this.contacts=contacts,this.container=container,this.defaultSelectedRow={row:-1},this.iSelectedRow=new Proxy(this.defaultSelectedRow,this.highlightIcon)}highlightIcon={set(target,property,value){if("row"===property){if(document.querySelector(".updateRowIconContainer")){let element=document.querySelector(".updateRowIconContainer");value<0?(element.style.pointerEvents="none",element.style.opacity=.5):(element.style.pointerEvents="auto",element.style.opacity=1)}if(document.querySelector(".deleteRowIconContainer")){let element=document.querySelector(".deleteRowIconContainer");value<0?(element.style.pointerEvents="none",element.style.opacity=.5):(element.style.pointerEvents="auto",element.style.opacity=1)}}return target[property]=value,!0}};testFunction(name){console.log(`testFunction = ${name} started`)}displayTable=()=>{this.tableHeaderContext=this.setTableHeaderContext(),this.container.innerHTML="";let tableContainerHeader=this.CreateTableContainerHeader();this.table=document.createElement("table"),this.table.classList.add("table"),this.PopulateTable(),this.table.createCaption().classList.add("table-caption"),this.table.createTHead().classList.add("table-header"),this.createTableHeaderFirstRow(),this.createTableHeaderSecondRow(),this.createTableFooter(),this.container.appendChild(tableContainerHeader),this.container.appendChild(this.table),this.iSelectedRow.row=-1};CreateTableContainerHeader(){let tableContainerHeader=document.createElement("div");tableContainerHeader.classList.add("table-container-header"),tableContainerHeader.innerHTML="Oh&nbsp;My&nbsp;&nbsp;&nbsp;Contacts&nbsp;&nbsp;&nbsp;Tabelo";let span=document.createElement("span");return span.classList.add("shiftHamburger"),span.classList.add("tooltip"),span.classList.add("fade"),span.setAttribute("data-tooltip","Open documentation"),span.addEventListener("click",(function(){document.querySelector("#contacts .table-container-header span").style.display="none"})),span.addEventListener("click",booklet.openDocumentation,!1),span.innerHTML="&#9776;",tableContainerHeader.insertBefore(span,tableContainerHeader.firstChild),tableContainerHeader}createTableHeaderFirstRow(){let row=this.table.tHead.insertRow(0);row.classList.add("table-tr-head");for(let i=0;i<this.tableHeaderContext.cellContexts.length;i++){var cell=document.createElement("th");row.appendChild(cell),cell.innerHTML=this.tableHeaderContext.cellContexts[i].caption,cell.classList.add("table-tr-head-cell"),cell.classList.add("table-tr1-head-cell"),this.tableHeaderContext.cellContexts[i].cssClassList.forEach(item=>{cell.classList.add(item)});var span=document.createElement("span");span.classList.add("table-sortind"),cell.appendChild(span)}for(let i=0;i<this.tableHeaderContext.cellContexts.length;i++)this.table.rows[0].cells[i].classList.contains("notsorted")||this.table.rows[0].cells[i].addEventListener("click",()=>{var isShiftKeyPressed=event.shiftKey;this.updateTable(i,isShiftKeyPressed,this.tableHeaderContext,this.table)})}createTableHeaderSecondRow(){let row=this.table.tHead.insertRow(1);row.classList.add("table-tr-head2");let cell=document.createElement("th"),flexContainer;row.appendChild(cell),cell.innerHTML=this.getInnerHtmlForHeaderSecondRowCell(),icon_Filter=new IconFilter("container-iconFilter","icon-filter","fa fa-filter"),cell.querySelector(".icon-flex-container").appendChild(icon_Filter.span),cell.colSpan=this.table.rows[0].cells.length,cell.classList.add("table-tr2-head-cell")}createTableFooter(){let footer,row=table.table.createTFoot().insertRow(0);row.classList.add("footer");let cell=row.insertCell(0);cell.colSpan=this.table.rows[0].cells.length;let div=document.createElement("div");div.classList.add("banner"),div.classList.add("banner-footer");let span=document.createElement("span");span.classList.add("footer-text"),span.innerHTML="&copy;&nbsp;2020&nbsp;BouncingBits";let span1=document.createElement("span");span1.innerHTML="&nbsp;&nbsp;not-for-profit company",span.appendChild(span1),div.appendChild(span),cell.appendChild(div)}updateTable(iLatestClickedCell,isShiftKeyPressed,tableHeaderContext,table){let updatedSortContext=this.updateTableHeaderSortContext(iLatestClickedCell,tableHeaderContext.sortContext,isShiftKeyPressed);tableHeaderContext.sortContext=updatedSortContext;let updatedCellContexts=this.updateTableHeaderCellContexts(tableHeaderContext);tableHeaderContext.cellContexts=updatedCellContexts;let sortRule=this.extractSortRule(tableHeaderContext);this.contacts=Data.sortByRule(sortRule,this.contacts),this.updateTableHeaderRow(tableHeaderContext.cellContexts,table),this.PopulateTable()}updateTableHeaderCellContexts(tableHeaderContext){let sortContext=tableHeaderContext.sortContext,cellContexts=tableHeaderContext.cellContexts,iClicked=sortContext.iLatestClickedCell;for(let i=0;i<cellContexts.length;i++){let list=cellContexts[i].cssClassList,iUnsorted=list.indexOf("unsorted"),iAscending=list.indexOf("sort-ascending"),iDescending=list.indexOf("sort-descending");if(i===iClicked)iUnsorted>-1?list.splice(iUnsorted,1,"sort-ascending"):iAscending>-1?list.splice(iAscending,1,"sort-descending"):iDescending>-1&&list.splice(iDescending,1,"sort-ascending");else{if(sortContext.iClickedCells.includes(i))continue;iAscending>-1?list.splice(iAscending,1,"unsorted"):iDescending>-1&&list.splice(iDescending,1,"unsorted")}tableHeaderContext.cellContexts[i].cssClassList=list.slice()}return tableHeaderContext.cellContexts}setTableHeaderContext=()=>{let item0=this.contacts[0],itemKeys=Object.keys(item0),headerCellContexts=[],sortContext=new TableSortContext(-1,[]),defaltHeaderCellCssClassList=["unsorted","checked"],tableHeaderContext;return itemKeys.forEach(key=>{let cssClassList=defaltHeaderCellCssClassList,caption=this.getCaption(key),cellsContext=new TableHeaderCellContext(key,caption,cssClassList);headerCellContexts.push(cellsContext)}),new TableHeaderContext(headerCellContexts,sortContext,"false")};getCaption(key){return key[0].toUpperCase()+key.slice(1)}updateTableHeaderSortContext(i,sortContext,isShiftKeyPressed){return sortContext.iLatestClickedCell=i,isShiftKeyPressed?sortContext.iClickedCells.includes(i)||sortContext.iClickedCells.push(i):(sortContext.iClickedCell=i,sortContext.iClickedCells=[],sortContext.iClickedCells.push(i)),sortContext}extractSortRule(tableHeaderContext){let sortRule=[];return tableHeaderContext.sortContext.iClickedCells.forEach(i=>{let list=tableHeaderContext.cellContexts[i].cssClassList,sortDirection="unsorted";list.indexOf("sort-ascending")>-1?sortDirection="sort-ascending":list.indexOf("sort-descending")>-1&&(sortDirection="sort-descending");let name=tableHeaderContext.cellContexts[i].name;"name"===name&&(name="name.firstName"),"username"===name&&(name="username.username"),"address"===name&&(name="address.city"),"company"===name&&(name="company.name"),sortRule.push({name:name,sortDirection:sortDirection})}),sortRule}updateTableHeaderRow(cellContexts,table){for(var i=0;i<table.rows[0].cells.length;i++)cellContexts[i].cssClassList.forEach(item=>{(item.includes("sort-ascending")||item.includes("sort-descending"))&&table.rows[0].cells[i].classList.remove("unsorted"),item.includes("sort-ascending")&&(table.rows[0].cells[i].classList.remove("sort-descending"),table.rows[0].cells[i].classList.add("sort-ascending")),item.includes("sort-descending")&&(table.rows[0].cells[i].classList.remove("sort-ascending"),table.rows[0].cells[i].classList.add("sort-descending")),table.rows[0].cells[i].classList.add(item)})}getInnerHtmlForHeaderSecondRowCell(){let onClickAddContact="(function(){\n\t\t\tformAddContact.setFormAddContactHeader('#form-header',\n\t\t\t 'New&nbsp;&nbsp;Contact&nbsp;&nbsp;Form', 'form-add-contact', '.addRowIcon');\t\t\t\t\t\t\n\t\t    })()",onClickEditContact="(function(){\n\t\t\tformAddContact.setFormAddContactHeader('#form-header',\n\t\t\t'Edit&nbsp;&nbsp;Contact&nbsp;&nbsp;Form', 'form-edit-contact', '.updateRowIcon');\t\t\t\t\t\t\n\t\t    })()",onClickDeleteContact="(function(){\n\t\t\ttable.deleteSelectedRow();\t\t\t\t\t\t\n\t\t\t})()",onKeyEnterSearch="(function(){\t\t\n\t\t\t   if (event.keyCode == 13) {\t\t\t\t\n\t\t\t\t  table.filterTable();\n\t\t\t   }\t\t\t\t\t\t\n\t\t\t})(event)",onClickSearch="(function(){\n\t\t\t   table.filterTable();\t\t\t\t\t\t\t\t\t\n\t\t\t})()",onClickDisplayTestContacts="(function(){\n\t\t\ttable.displayTestContacts();\t\t\t\t\t\t\t\t\t\n\t\t })()",onClickSaveContacts="(function(){\n\t\t\ttable.saveContacts();\t\t\t\t\t\t\t\t\t\n\t\t })()",onClickLoadContacts="(function(){\n\t\t\ttable.loadContacts();\t\t\t\t\t\t\t\t\t\n\t\t })()",innerHtml;return new th("table-tr2-head-cell","div","icon-flex-container").iconContainer("div","dbIconContainer db-dropdown tooltip fade","data-tooltip","Contacts",null).addIcon("dbIcon fa fa-database contacts-data").addDropdownContainer("div","db-dropdown-content").addDropdownItem("p","db-dropdown-item",onClickLoadContacts,"Load","fa fa-upload").addDropdownItem("p","db-dropdown-item",onClickSaveContacts,"Save","fa fa-download").addDropdownItem("p","db-dropdown-item",onClickDisplayTestContacts,"Test Data","fa fa-list-alt").iconContainer("span","addRowIconContainer tooltip fade","data-tooltip","Add new contact",onClickAddContact).addIcon("addRowIcon fa fa-plus add-row").iconContainer("span","updateRowIconContainer tooltip fade","data-tooltip","Edit selected contact",onClickEditContact).addIcon("updateRowIcon fa fa-pencil edit-row").iconContainer("span","deleteRowIconContainer tooltip fade","data-tooltip","Delete selected contact",onClickDeleteContact).addIcon("deleteRowIcon fa fa-trash-o delete-row").inputContainer("span","input-searchTable",onKeyEnterSearch).addInput("text","Searching ...","input-search").addIconContainerWithIcon("span","tooltipSearch tooltip fade","data-tooltip","Search table","fa fa-search",onClickSearch).toHtml()}displayTestContacts(){this.contacts=JSON.parse(Data.addTestJsonData()),table.PopulateTable(),this.closeHoverMenu()}saveContacts(){localStorage.contacts=JSON.stringify(this.contacts),this.closeHoverMenu()}loadContacts(){void 0!==localStorage.contacts&&(this.contacts=JSON.parse(localStorage.contacts)),table.PopulateTable(),this.closeHoverMenu()}closeHoverMenu(){let menu=document.querySelector(".db-dropdown-content");menu.classList.add("dropdown-content-clicked"),setTimeout((function(){menu.classList.remove("dropdown-content-clicked")}),10)}deleteSelectedRow(){table.contacts.splice([table.iSelectedRow.row-2],1),table.iSelectedRow.row=-1,table.PopulateTable()}filterTable(){let input=document.querySelector(".input-search"),inputString=input.value;if(table.removeHighlightfromTextInTable(),input.value){let filter=inputString.trim();inputString.trim().length>0&&table.filterTableAndHighliteMatchingText(filter)}}removeHighlightfromTextInTable(){for(let i=2;i<table.table.rows.length;i++){for(var cell of table.table.rows[i].cells){let txtChild=cell.querySelector(".searchble-txt");if(null!=txtChild){cell.removeChild(txtChild);let lastChild=document.createElement("span");lastChild.innerHTML=txtChild.innerHTML.split("<mark>").join("").split("</mark>").join(""),lastChild.classList.add("searchble-txt"),cell.appendChild(lastChild)}}table.table.rows[i].style.display=""}}filterTableAndHighliteMatchingText(filterString){let rowList,i;rowList=table.table.getElementsByTagName("tr");let checkedColumns=[];for(table.tableHeaderContext.cellContexts.forEach(cellContext=>{cellContext.cssClassList.includes("checked")?checkedColumns.push("checked"):checkedColumns.push(" ")}),i=2;i<rowList.length;i++){let cellList=rowList[i].getElementsByTagName("td"),isHighlightedData="false";for(let j=0;j<cellList.length;j++){let cell=cellList[j];if(cell&&"checked"===checkedColumns[j]){let isHighlighted;"true"===this.handleSearchableContentOfCell(cell,filterString,table.tableHeaderContext.isSencitiveSearch)&&(isHighlightedData="true")}}rowList[i].style.display="true"===isHighlightedData?"":"none"}}handleSearchableContentOfCell(cell,filter,isSensitive){let isHighlighted="false",content=cell.innerHTML,searchableContent="",separator1='<span class="searchble-txt">',separator2="</span>",pos1=content.indexOf(separator1,0),pos2=content.indexOf("</span>",pos1+separator1.length);if(pos1>-1&&pos2>0){searchableContent=content.slice(pos1+separator1.length,pos2);let highlightedContent=this.highlightFinding(searchableContent,filter,isSensitive);cell.removeChild(cell.querySelector(".searchble-txt"));let lastChild=document.createElement("span");lastChild.classList.add("searchble-txt"),lastChild.innerHTML=highlightedContent,cell.appendChild(lastChild),highlightedContent!==searchableContent&&(isHighlighted="true")}return isHighlighted}highlightFinding(searchableContent,filter,isSensitive){let str=searchableContent,result=searchableContent,flt=filter;"false"===isSensitive&&(str=searchableContent.toUpperCase(),flt=filter.toUpperCase());let sub="",sub1="",pos0=0,pos1=str.indexOf(flt,pos0);for(;pos1>-1;)sub1=sub.concat("",searchableContent.substring(pos0,pos1)),sub=sub1.concat("",`<mark>${searchableContent.substring(pos1,pos1+flt.length)}</mark>`),pos0=pos1+flt.length,pos1=str.indexOf(flt,pos0),pos1<0&&(result=sub.concat("",searchableContent.substring(pos0)));return result}PopulateTable(){for(var i=this.table.rows.length-1;i>1;i--)this.table.deleteRow(i);let iRow=1;this.contacts.forEach(item=>{this.contactId=item.id,iRow+=1;let row=this.table.insertRow();row.classList.add("table-tr-data"),row.addEventListener("click",()=>{this.iSelectedRow.row=event.target.closest("tr").rowIndex,this.highlightRow(this.iSelectedRow.row)});for(let i=0;i<this.tableHeaderContext.cellContexts.length;i++){let cellValue=Object.values(item)[i];if("object"==typeof cellValue&&"address"!==this.tableHeaderContext.cellContexts[i].name){let result=[];Parser.parseObject(cellValue,result),cellValue=result.join(separatorBr)}let cell=row.insertCell();"id"===this.tableHeaderContext.cellContexts[i].name?cell.innerHTML=new td("",[]).textContainer("span","searchble-txt",cellValue).toHtml():"name"===this.tableHeaderContext.cellContexts[i].name?cell.innerHTML=this.getInnerHtmlForCellName(cellValue,item):"username"===this.tableHeaderContext.cellContexts[i].name?cell.innerHTML=this.getInnerHtmlForCellUserName(cellValue,item):"phone"===this.tableHeaderContext.cellContexts[i].name?cell.innerHTML=this.getInnerHtmlForCellPhone(cellValue):"address"===this.tableHeaderContext.cellContexts[i].name?cell.innerHTML=this.getInnerHtmlForCellAddress(cellValue,item):cell.innerHTML=new td("",[]).textContainer("span","searchble-txt",cellValue).toHtml(),cell.classList.add("table-tr-data-cell"),cell.setAttribute("data-th",this.tableHeaderContext.cellContexts[i].caption),i%2==0?cell.classList.add("cell-even"):cell.classList.add("cell-odd")}})}getInnerHtmlForCellAddress(cellValue,item){let innerHtml="";if(null!=(cellValue=this.getAddress(item))&&" "!==String(cellValue)){let mapMarkerText="",lat=0,lng=0;"geo"in item.address&&(lat=item.address.geo.lat,lng=item.address.geo.lng,mapMarkerText=item.address.street+", "+item.address.city+", "+item.address.zipcode);let name="map",cssCellClassName="googleMaps-map",onClickGoogleMap=`(function(){\t\n\t\t\t\t\t\t\t\tlet iRowClickedIndex = event.target.closest('tr').rowIndex;\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet iSupplementalRow = table.putImageToSupplementalRow('${name}', '${cssCellClassName}', iRowClickedIndex);\n\t\t\t\t\t\t\t\tif(iSupplementalRow > 0) {\n\t\t\t\t\t\t\t\t\tlet cell = table.table.rows[iSupplementalRow].cells[0];\n\t\t\t\t\t\t\t\t\tlet map = table.initializeGoogleMaps('${lat}', '${lng}', cell, iSupplementalRow);\n\t\t\t\t\t\t\t\t\ttable.googleMapLoad(map);\t\t\t\t\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})()`;cssCellClassName="osm-map";let onClickOpenStreetMap=`(function(){\t\n\t\t\t\t\t\t\t\t\tlet iRowClickedIndex = event.target.closest('tr').rowIndex;\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlet iSupplementalRow = table.putImageToSupplementalRow('${name}', '${cssCellClassName}', iRowClickedIndex);\n\t\t\t\t\t\t\t\t\tif(iSupplementalRow > 0) {\n\t\t\t\t\t\t\t\t\t\tlet cell = table.table.rows[iSupplementalRow].cells[0];\n\t                        \t\t\ttable.openStreetMapLoad('${lat}', '${lng}', '${mapMarkerText}', cell, iSupplementalRow);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()`,photoName="EstatePlaceholder2.jpg";"photo"in item.name&&""!=item.name.photo&&" "!=item.name.photo&&(photoName=item.id+"/"+item.address.photo),cssCellClassName="photo";let onClickPhotoEstate=`(function(){\t\n\t\t\t\t\t\t\t\t\tlet iRowClickedIndex = event.target.closest('tr').rowIndex;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tlet iSupplementalRow = table.putImageToSupplementalRow('${photoName}', '${cssCellClassName}', iRowClickedIndex);\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t})()`;innerHtml=new td("",[]).iconContainer("span","tooltip fade shiftGoogle","data-tooltip","Display Google Maps",onClickGoogleMap).addIcon("googleMapsMarkerIcon fa fa-map-marker").iconContainer("span","tooltip fade shiftOsm","data-tooltip","Display OpenStreet Map",onClickOpenStreetMap).addIcon("openStreetMapMarkerIcon fa fa-map-marker").iconContainer("span","tooltip fade shiftEstate","data-tooltip","Display Photo Estate",onClickPhotoEstate).addIcon("photoIcon fa fa-picture-o").textContainer("span","searchble-txt",cellValue).toHtml()}return innerHtml}getInnerHtmlForCellName(cellValue,item){let innerHtml="";if(null!=cellValue&&" "!==String(cellValue)){let cssCellClassName="photo-portrait",photoName="PortraitPlaceholder.jpg";"photo"in item.name&&""!=item.name.photo&&" "!=item.name.photo&&(photoName=item.id+"/"+item.name.photo);let onClick=`(function(){\t\n\t\t\t\t\t\t\tlet iRowClickedIndex = event.target.closest('tr').rowIndex;\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttable.putImageToSupplementalRow('${photoName}', '${cssCellClassName}', iRowClickedIndex);\n\t\t\t\t\t\t\t})()`;innerHtml=new td("",[]).iconContainer("span","tooltip fade shiftPortrait","data-tooltip","Display portrait photo",onClick).addIcon("portraitIcon fa fa-user-circle-o").textContainer("span","searchble-txt",item.name.firstName+" "+item.name.lastName).toHtml()}return innerHtml}getInnerHtmlForCellUserName(cellValue,item){let innerHtml="";if(null!=cellValue&&" "!==String(cellValue)){let cssCellClassName="photo-avatar",photoName="AvatarPlaceholder.jpg";"avatar"in item.username&&""!=item.username.avatar&&" "!=item.username.avatar&&(photoName=item.id+"/"+item.username.avatar);let onClick=`(function(){\t\n\t\t\t\t\t\t\tlet iRowClickedIndex = event.target.closest('tr').rowIndex;\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttable.putImageToSupplementalRow('${photoName}', '${cssCellClassName}', iRowClickedIndex);\n\t\t\t\t\t\t\t})()`;innerHtml=new td("",[]).iconContainer("span","tooltip fade shiftAvatar","data-tooltip","Display avatar",onClick).addIcon("avatarIcon fa fa-user-circle").textContainer("span","searchble-txt",item.username.username).toHtml()}return innerHtml}getInnerHtmlForCellPhone(cellValue){let innerHtml="";if(null!=cellValue&&" "!==String(cellValue)){let onClickSkype=`(function(){\t\n\t\t\t\t                window.location.href = 'skype:${cellValue}call';\n\t\t\t\t\t\t\t})()`,onClickLandPhone=`(function(){\n\t\t\t\twindow.alert('You are trying to call the number: ${cellValue}. Unfortunately, the phone service is not running.');\t\n\t\t\t\t//window.location.href = 'skype:${cellValue}call';\n\t\t\t})()`;innerHtml=new td("",[]).iconContainer("span","tooltip fade shiftSkype","data-tooltip","Call Skype",onClickSkype).addIcon("skypeIcon fa fa-skype").iconContainer("span","tooltip fade shiftLandPhone","data-tooltip","Call Land Line",onClickLandPhone).addIcon("table-phoneind fa fa-skype").textContainer("span","searchble-txt",cellValue).toHtml()}return innerHtml}highlightRow(iRowClickedIndex){for(var i=0;i<this.table.rows.length;i++)this.table.rows[i].classList.remove("tr-selected");this.table.rows[iRowClickedIndex].classList.add("tr-selected")}getAddress(item){let address;return item.address.suite+", "+item.address.street+", "+item.address.city+", "+item.address.zipcode+", <br>"+item.address.geo.lat+", "+item.address.geo.lng}getCoordinatesFromCell(cellValue){let coord={lat:Number(41.51),lng:Number(-.15)},array=String(cellValue).split("<br>"),length=array.length;if(length>2){let coordinations=array[length-2].split(",");coord.lat=coordinations[0],coord.lng=coordinations[1]}return coord}getCellChildrenClasses(cell){let container=cell.children[0],childrenClasses=[];for(let i=0;i<container.children.length;i++){let childClasses=Array.from(container.children[i].classList);childrenClasses=childrenClasses.concat(childClasses)}return childrenClasses}putImageToFlexContainer(photoName,cssClassName){let div=this.putImageToDiv(photoName,cssClassName),container=document.createElement("div");return container.classList.add("flex-container"),container.appendChild(div),container}putImageToDiv(name,cssClassName){let div=document.createElement("div");return div.classList.add("item"),div.classList.add(cssClassName),"map"!==name&&(div.style.backgroundImage="url('/assets/photos/"+name+"')"),div.style.display="block",div}insertSupplementalRow=iRow=>{let row=this.table.insertRow(iRow),cell=row.insertCell();return row.classList.add("table-tr-data"),row.classList.add("table-tr-supplemental"),cell.colSpan=this.table.rows[0].cells.length,cell.classList.add("table-tr-data-cell"),row};putImageToSupplementalRow(photoName,cssClassName,iRowClickedIndex){let iRow=iRowClickedIndex+1,currentRow=this.table.rows[iRow];if(!currentRow||currentRow.classList.contains("footer")){let tbody,supplementalRow=document.querySelector("tbody").insertRow(-1),cell=supplementalRow.insertCell();supplementalRow.classList.add("table-tr-data"),supplementalRow.classList.add("table-tr-supplemental"),cell.colSpan=this.table.rows[0].cells.length,cell.classList.add("table-tr-data-cell");let container=this.putImageToFlexContainer(photoName,cssClassName);return supplementalRow.cells[0].appendChild(container),iRow}let rowIndex=currentRow.rowIndex;if(currentRow.classList.contains("table-tr-supplemental")){let cell=currentRow.cells[0];if(cell.children.length>0){let childrenClasses;if(this.getCellChildrenClasses(cell).includes(cssClassName))return this.table.deleteRow(rowIndex),-1;{let div=this.putImageToDiv(photoName,cssClassName);currentRow.cells[0].children[0].appendChild(div)}}return iRow}{let supplementalRow=this.insertSupplementalRow(iRow),container=this.putImageToFlexContainer(photoName,cssClassName);return supplementalRow.cells[0].appendChild(container),iRow}}initializeGoogleMaps(lat,lng,cell,iRowMap){var coord={lat:Number(lat),lng:Number(lng)},prop={center:new google.maps.LatLng(Number(lat),Number(lng)),zoom:14,mapTypeId:google.maps.MapTypeId.ROADMAP};if(cell.children.length<1)return;var container=cell.children[0];for(let i=0;i<cell.children[0].children.length;i++){let child=cell.children[0].children[i];child.classList.contains("googleMaps-map")&&container.removeChild(child)}var div=document.createElement("div");let id="googleMaps-map"+String(iRowMap);div.id=id,div.style.display="block",div.classList.add("googleMaps-map"),div.classList.add("item"),container.appendChild(div);let map=new google.maps.Map(div,prop),marker=new google.maps.Marker({position:coord,map:map});return map}googleMapLoad(map){google.maps.event.trigger(map,"resize")}openStreetMapLoad(lat,lng,mapMarkerText,cell,iRowMap){if(cell.children.length<1)return;var container=cell.children[0];for(let i=0;i<cell.children[0].children.length;i++){let child=cell.children[0].children[i];child.classList.contains("osm-map")&&container.removeChild(child)}var div=document.createElement("div");let id="osm-map"+String(iRowMap);div.id=id,div.style.display="block",div.classList.add("osm-map"),div.classList.add("item"),container.appendChild(div);var map=L.map(id).setView([lat,lng],17);L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),L.marker([lat,lng]).addTo(map).bindPopup(mapMarkerText).openPopup()}}